{"version":3,"sources":["images/header/logo.svg","components/Header.js","components/Footer.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/PopupWithForm.js","components/AddPlacePopup.js","components/Login.js","components/Register.js","components/ProtectedRoute.js","components/InfoTooltip.js","components/ImagePopup.js","utils/api.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","utils/auth.js","images/done.svg","images/fail.svg","components/App.js","reportWebVitals.js","index.js"],"names":["Header","props","location","useLocation","linkName","className","src","logo","alt","pathname","to","userEmail","onClick","onLogout","Footer","CurrentUserContext","React","createContext","Card","card","onCardClick","onCardLike","onCardDelete","currentUser","useContext","isOwn","owner","_id","isLiked","likes","some","i","cardDeleteButtonClassName","cardLikeButtonClassName","type","link","name","length","Main","onEditAvatar","onEditProfile","onAddPlace","cards","about","avatar","style","backgroundImage","map","PopupWithForm","title","isOpen","onClose","children","container","handleSubmit","buttonText","onSubmit","AddPlacePopup","useState","setName","setLink","e","preventDefault","id","placeholder","onChange","target","value","minLength","maxLength","required","Login","email","setEmail","password","setPassword","useEffect","newPath","onPathChange","onSignin","Register","onSignup","ProtecedRoute","Component","component","loggedIn","InfoTooltip","statusImage","status","ImagePopup","isOpened","confing","this","_url","url","_headers","headers","res","ok","json","Promise","reject","fetch","method","then","_checkError","avatarUrl","newConfing","body","JSON","stringify","cardId","updateLike","deleteLike","userData","inputsValue","authorization","EditProfilePopup","onUpdateUser","description","setDescription","EditAvatarPopup","onUpdateAvatar","avaRef","useRef","current","reset","ref","defaultValue","BASE_URL","_checkResponse","App","setLoggedIn","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","selectedCard","setSelectedCard","isConfirmPopupOpen","setIsConfirmPopupOpen","setCards","setCurrentUser","setUserEmail","opened","success","isInfoTooltipOpen","setInfoTooltipOpen","currentPath","setCurrentPath","history","useHistory","api","getUserInfo","data","catch","console","log","getInitialCards","err","closeAllPopups","handlePathChange","token","localStorage","getItem","result","Error","push","Provider","removeItem","path","auth","setItem","alert","ProtectedRoute","changeLikeCardStatus","newCard","state","c","onConfirmPopup","removeCard","filter","patchProfileInfo","patchCard","newAvatar","done","fail","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.ad181b1f.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.03b78ada.svg\";","import logo from \"../images/header/logo.svg\";\nimport React from \"react\";\nimport { Link, useLocation } from \"react-router-dom\";\n\nfunction Header(props) {\n  const location = useLocation();\n  const linkName = {'/': 'Выйти', '/sign-up': 'Войти', '/sign-in': 'Регистрация'}\n  function handleLogout(){\n    props.onLogout()\n  };\n \n  return (\n    <header className=\"header\">\n      <img src={logo} alt=\"логотип\" className=\"header__logo\" />\n      <div className=\"header__menu\">\n        {location.pathname === '/sign-in' && <Link className=\"header__link\" to=\"/sign-up\">{linkName[location.pathname]}</Link> }\n        {location.pathname === '/sign-up' && <Link className=\"header__link\" to=\"/sign-in\">{linkName[location.pathname]}</Link> }\n        {location.pathname === '/' && <p className=\"header__link header__link_type_email\">{props.userEmail}</p> }\n        {location.pathname === '/' && <Link onClick={handleLogout} to=\"\" className=\"header__link header__link_type_exit\">{linkName[location.pathname]}</Link> }\n      </div>     \n    </header>\n  );\n}\n\nexport default Header;\n","const Footer = () => {\n  return (\n    <div className=\"footer\">\n      <p className=\"footer__copyright\">&copy; Mesto Russia 2022</p>\n    </div>\n  );\n};\n\nexport default Footer;\n","import React from \"react\";\n\nconst CurrentUserContext = React.createContext()\n\nexport default CurrentUserContext;","import CurrentUserContext from \"../contexts/CurrentUserContext\";\nimport { useContext } from \"react\";\n\nconst Card = ({ card, onCardClick, onCardLike, onCardDelete }) => {\n  const currentUser = useContext(CurrentUserContext);\n  const handleClick = () => {\n    onCardClick(card);\n  };\n  const handleLikeClick = () => {\n    onCardLike(card);\n  };\n  const handleCardDelete = () => {\n    onCardDelete(card);\n  };\n  const isOwn = card.owner._id === currentUser._id;\n  const isLiked = card.likes.some((i) => i._id === currentUser._id);\n\n  // Создаём переменную, которую после зададим в `className` для кнопки удаления\n  const cardDeleteButtonClassName = `card__delete ${\n    isOwn ? \"card__delete_my\" : \"\"\n  }`;\n  // Создаём переменную, которую после зададим в `className` для кнопки лайка\n  const cardLikeButtonClassName = `card__like ${\n    isLiked ? \"card__like_active\" : \"\"\n  }`;\n\n  return (\n    <li className=\"card\">\n      <button\n        onClick={handleCardDelete}\n        className={cardDeleteButtonClassName}\n        type=\"button\"\n      ></button>\n      <img\n        className=\"card__photo\"\n        src={card.link}\n        alt={card.name}\n        onClick={handleClick}\n      />\n      <div className=\"card__info\">\n        <h2 className=\"card__title\">{card.name}</h2>\n        <div className=\"card__like-cont\">\n          <button\n            onClick={handleLikeClick}\n            className={cardLikeButtonClassName}\n            type=\"button\"\n          ></button>\n          <span className=\"card__likes-container\">{card.likes.length} </span>\n        </div>\n      </div>\n    </li>\n  );\n};\n\nexport default Card;\n","import { useContext } from \"react\";\nimport Card from \"../components/Card\";\nimport CurrentUserContext from \"../contexts/CurrentUserContext\";\n\nconst Main = ({\n  onEditAvatar,\n  onEditProfile,\n  onAddPlace,\n  cards,\n  onCardClick,\n  onCardLike,\n  onCardDelete,\n}) => {\n  const { name, about, avatar } = useContext(CurrentUserContext);\n\n  return (\n    <main className=\"main\">\n      <section className=\"profile\">\n        <div className=\"profile__image\">\n          <div\n            className=\"profile__avatar\"\n            style={{ backgroundImage: `url(${avatar})` }}>\n            <button\n              onClick={onEditAvatar}\n              type=\"button\"\n              className=\"profile__overlay\"\n            ></button>\n          </div>\n          <div>\n            <div className=\"profile__info\">\n              <h1 className=\"profile__name\">{name}</h1>\n              <button\n                onClick={onEditProfile}\n                type=\"button\"\n                className=\"profile__edit\">\n              </button>\n            </div>\n            <p className=\"profile__about\">{about}</p>\n          </div>\n        </div>\n        <button\n          onClick={onAddPlace}\n          type=\"button\"\n          className=\"profile__add\">\n        </button>\n      </section>\n\n      <section className=\"cards\">\n        {cards.map((card) => (\n          <Card\n            key={card._id}\n            card={card}\n            onCardClick={onCardClick}\n            onCardLike={onCardLike}\n            onCardDelete={onCardDelete}/>\n        ))}\n      </section>\n    </main>\n  );\n};\nexport default Main;\n","const PopupWithForm = ({\n  name,\n  title,\n  isOpen,\n  onClose,\n  children,\n  container,\n  handleSubmit,\n  buttonText,\n}) => {\n  return (\n    <div\n      className={\n        isOpen\n          ? `popup popup_type_${name} popup_opened`\n          : `popup popup_type_${name}`\n      }>\n      <form onSubmit={handleSubmit} name={name} className={container}>\n        <button\n          type=\"button\"\n          className=\"popup__closed\"\n          onClick={onClose}\n        ></button>\n        <h2 className=\"popup__title\">{title}</h2>\n        {children}\n        <button className=\"popup__button\" type=\"submit\">\n          {buttonText}\n        </button>\n      </form>\n    </div>\n  );\n};\nexport default PopupWithForm;\n","import PopupWithForm from \"./PopupWithForm\";\nimport { useState } from \"react\";\n\nfunction AddPlacePopup({ isOpen, onClose, onAddPlace }) {\n  const [name, setName] = useState(\"\");\n  const [link, setLink] = useState(\"\");\n\n  const handleNameChange = (e) => {\n    setName(e.target.value);\n  };\n  const handlePlaceChange = (e) => {\n    setLink(e.target.value);\n  };\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    onAddPlace({\n      name,\n      link,\n    });\n    setName(\"\");\n    setLink(\"\");\n  };\n\n  return (\n    <PopupWithForm\n      name=\"add\"\n      title=\"Новое место\"\n      isOpen={isOpen}\n      container=\"popup__container popup__form\"\n      onClose={onClose}\n      handleSubmit={handleSubmit}\n      buttonText=\"Сохранить\">\n      \n      <input\n        name=\"InputNameCard\"\n        type=\"text\"\n        id=\"input__popup-CardName\"\n        className=\"popup__input\"\n        placeholder=\"Название места\"\n        onChange={handleNameChange}\n        minLength=\"2\"\n        maxLength=\"40\"\n        value={name || \"\"}\n        required/>\n\n      <span id=\"input__popup-CardName-error\" className=\"popup__error\" />\n      <input\n        type=\"url\"\n        className=\"popup__input\"\n        name=\"InputImgCard\"\n        id=\"input__popup-CardImg\"\n        placeholder=\"Ссылка на картинку\"\n        value={link || \"\"}\n        onChange={handlePlaceChange}\n        required/>\n        \n      <span id=\"input__popup-CardImg-error\" className=\"popup__error\" />\n    </PopupWithForm>\n  );\n}\n\nexport default AddPlacePopup;\n","import React from \"react\";\n\nfunction Login(props) {\n  const [email, setEmail] = React.useState(\"\");\n  const [password, setPassword] = React.useState(\"\");\n  const handlePathChange = (newPath) => {\n    props.onPathChange(newPath);\n  };\n\n  React.useEffect(() => {\n    handlePathChange(\"/sign-in\");\n  }, []);\n\n  const handleEmailChange = (e) => {\n    setEmail(e.target.value);\n  };\n  const handlePasswordChange = (e) => {\n    setPassword(e.target.value);\n  };\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    props.onSignin(email, password);\n  };\n\n  return (\n    <div>\n      <form className=\"form\" onSubmit={handleSubmit}>\n        <h1 className=\"form__title\">Вход</h1>\n        <input\n          type=\"email\"\n          onChange={handleEmailChange}\n          className=\"form__item\"\n          value={email}\n          id=\"signin-email\"\n          placeholder=\"Email\"\n          required/>\n\n        <input\n          type=\"password\"\n          onChange={handlePasswordChange}\n          className=\"form__item\"\n          value={password}\n          id=\"signin-password\"\n          placeholder=\"Password\"\n          required/>\n          \n        <button type=\"submit\" className=\"form__button\">\n          Войти\n        </button>\n      </form>\n    </div>\n  );\n}\n\nexport default Login;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nfunction Register(props) {\n  const [email, setEmail] = React.useState(\"\");\n  const [password, setPassword] = React.useState(\"\");\n\n  const handleEmailChange = (e) => {\n    setEmail(e.target.value);\n  };\n  const handlePasswordChange = (e) => {\n    setPassword(e.target.value);\n  };\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    props.onSignup(email, password);\n  };\n  const handlePathChange = (newPath) => {\n    props.onPathChange(newPath);\n  };\n\n  React.useEffect(() => {\n    handlePathChange(\"/sign-up\");\n  }, []);\n\n  return (\n    <div>\n      <form className=\"form\" onSubmit={handleSubmit}>\n        <h1 className=\"form__title\">Регистрация</h1>\n        <input\n          type=\"email\"\n          onChange={handleEmailChange}\n          value={email}\n          className=\"form__item\"\n          id=\"signin-email\"\n          placeholder=\"Email\"\n          required/>\n        <input\n          type=\"password\"\n          onChange={handlePasswordChange}\n          className=\"form__item\"\n          id=\"signin-password\"\n          placeholder=\"Password\"\n          value={password}\n          required/>\n        <button type=\"submit\" className=\"form__button\">\n          Регистрация\n        </button>\n        <p className=\"form__caption\">\n          Уже зарегистрированы?\n          <Link className=\"form__link\" to=\"/sign-in\">\n            {\" \"}\n            Войти{\" \"}\n          </Link>\n        </p>\n      </form>\n    </div>\n  );\n}\n\nexport default Register;\n","import React from \"react\";\nimport { Redirect, Route } from \"react-router-dom\";\n\nfunction ProtecedRoute({ component: Component, ...props }) {\n  return (\n    <Route>\n      {props.loggedIn ? <Component {...props} /> : <Redirect to=\"/sign-in\" />}\n    </Route>\n  );\n}\n\nexport default ProtecedRoute;\n","import React from \"react\";\n\nfunction InfoTooltip(props) {\n  return (\n    <div\n      className={props.isOpen ? \"popup popup_opened\" : \"popup\"}\n      id={`popup-${props.name}`}\n      onClick={props.onClose}>\n\n      <div className=\"popup__container\">\n        <img\n          className=\"popup__status-image\"\n          src={props.statusImage}\n          alt={`Картинка регистрации: ${props.status}`}/>\n\n        <p className=\"popup__status-caption\">{props.title}</p>\n        <button\n          className=\"popup__closed\"\n          type=\"button\"\n          onClick={props.onClose}/>\n          \n      </div>\n    </div>\n  );\n}\n\nexport default InfoTooltip;\n","const ImagePopup = ({ card, onClose }) => {\n  return (\n    <div\n      className={\n        card.isOpened\n          ? `popup popup_opacity popup_opened`\n          : `popup popup_opacity`\n      }>\n        \n      <div className=\"popup__content\">\n        <figure className=\"popup__figure\">\n          <img className=\"popup__image\" src={card.link} alt={card.name} />\n          <figcaption className=\"popup__figcaption\">{card.name}</figcaption>\n        </figure>\n        <button\n          onClick={onClose}\n          type=\"button\"\n          className=\"popup__closed\"\n          id=\"ClosePopupBig\"\n        ></button>\n      </div>\n    </div>\n  );\n};\n\nexport default ImagePopup;\n","class Api {\n  constructor(confing) {\n    this._url = confing.url;\n    this._headers = confing.headers\n  }\n\n  _checkError(res) {\n    if (res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`Ошибка: ${res.status}`);\n  }\n\n  // Список всех карточек\n  getInitialCards() {\n    return fetch(`${this._url}/cards`, {\n      method: 'GET',\n      headers: this._headers\n    })\n    .then(this._checkError);\n  }\n\n  // Информация пользователя\n  getUserInfo() {\n    return fetch(`${this._url}/users/me`, {\n      method: 'GET',\n      headers: this._headers\n    })\n    .then(this._checkError);\n  }\n\n  // Обновление аватара \n  newAvatar(avatarUrl) {\n    const newConfing = {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify({\n        avatar: avatarUrl['avatar']\n      }),\n      \n    }\n    return fetch(`${this._url}/users/me/avatar`, newConfing)\n    .then(this._checkError);\n  }\n\n  // Удаление карточки\n  removeCard(cardId) {\n    const newConfing = {\n      headers: this._headers,\n      method: 'DELETE',\n    }\n    return fetch(`${this._url}/cards/${cardId}`, newConfing)\n    .then(this._checkError);\n  }\n\n  // Лайк и его удаление\n  changeLikeCardStatus(cardId, isLiked) {\n    const updateLike = {\n      headers: this._headers,\n      method: 'PUT', \n    }\n   \n    const deleteLike = {\n      headers: this._headers,\n      method: 'DELETE', \n    }\n    return fetch(`${this._url}/cards/likes/${cardId}`, isLiked ? deleteLike : updateLike)\n    .then(this._checkError);\n  }\n\n  // Отправление информации\n  patchProfileInfo(userData) {\n    const newConfing = {\n      method: 'PATCH',\n      headers: this._headers,\n      body: JSON.stringify(userData),\n    }\n    return fetch(`${this._url}/users/me`, newConfing)\n    .then(this._checkError);\n  }\n\n  // Отправление информации о фото и пользователе на сервер\n  patchCard(inputsValue) {\n    const newConfing = {\n      method: 'POST',\n      headers: this._headers,\n      body: JSON.stringify(inputsValue),\n      \n  }\n  return fetch(`${this._url}/cards`, newConfing)\n  .then(this._checkError);\n}\n}\n\nexport default new Api({\n  url: `https://mesto.nomoreparties.co/v1/cohort-43/`,\n  headers: {\n      authorization: '292cceda-e820-4d58-9be5-30225e20d80b',\n      'Content-Type': 'application/json'\n  }\n});\n","import PopupWithForm from \"./PopupWithForm\";\nimport { useContext, useEffect, useState } from \"react\";\nimport CurrentUserContext from \"../contexts/CurrentUserContext\";\n\nfunction EditProfilePopup({ isOpen, onClose, onUpdateUser }) {\n  const [name, setName] = useState(\"\");\n  const [description, setDescription] = useState(\"\");\n  const currentUser = useContext(CurrentUserContext);\n\n  useEffect(() => {\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n  }, [currentUser, isOpen]);\n\n  const onChangeName = (e) => {\n    setName(e.target.value);\n  };\n  const onChangeDescription = (e) => {\n    setDescription(e.target.value);\n  };\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    onUpdateUser({\n      name,\n      about: description,\n    });\n  };\n\n  return (\n    <PopupWithForm\n      name=\"edit\"\n      title=\"Редактировать профиль\"\n      container=\"popup__container popup__form\"\n      buttonText=\"Редактировать\"\n      handleSubmit={handleSubmit}\n      isOpen={isOpen}\n      onClose={onClose}>\n\n      <input\n        onChange={onChangeName}\n        value={name || \"\"}\n        type=\"text\"\n        className=\"popup__input\"\n        name=\"input-name\"\n        id=\"input__popup-name\"\n        minLength=\"2\"\n        maxLength=\"40\"\n        placeholder=\"Имя\"\n        required/>\n\n      <span id=\"input__popup-name-error\" className=\"popup__error\" />\n\n      <input\n        onChange={onChangeDescription}\n        value={description || \"\"}\n        type=\"text\"\n        className=\"popup__input\"\n        name=\"input-about\"\n        id=\"input__popup-about\"\n        minLength=\"2\"\n        maxLength=\"200\"\n        placeholder=\"Вид деятельности\"\n        required/>\n\n      <span id=\"input__popup-about-error\" className=\"popup__error\" />\n    </PopupWithForm>\n  );\n}\n\nexport default EditProfilePopup;\n","import PopupWithForm from \"./PopupWithForm\";\nimport { useRef } from \"react\";\n\nfunction EditAvatarPopup({ isOpen, onClose, onUpdateAvatar }) {\n  const avaRef = useRef();\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    onUpdateAvatar({\n      avatar: avaRef.current.value,\n    });\n    e.target.reset();\n  };\n\n  return (\n    <PopupWithForm\n      name=\"refresh\"\n      title=\"Обновить аватар\"\n      isOpen={isOpen}\n      container=\"popup__container popup__form\"\n      buttonText=\"Сохранить\"\n      onClose={onClose}\n      handleSubmit={handleSubmit}>\n\n      <input\n        type=\"url\"\n        className=\"popup__input\"\n        name=\"avatar\"\n        id=\"input__popup-avatar\"\n        placeholder=\"Ссылка на аватар\"\n        required\n        ref={avaRef}\n        defaultValue=\"\"/>\n        \n      <span id=\"input__popup-avatar-error\" className=\"popup__error\" />\n    </PopupWithForm>\n  );\n}\n\nexport default EditAvatarPopup;\n","const BASE_URL = 'https://auth.nomoreparties.co';\n\nfunction _checkResponse(res) {\n  if (res.ok) {\n    return res.json();\n  }\nreturn Promise.reject(`Ошибка ${res.status}`);\n}\n\nexport const register = (email, password) => {\n  return fetch(`${BASE_URL}/signup`, {\n    method: 'POST',\n    headers: {'Content-Type': 'application/json'},\n    body: JSON.stringify({ password, email })\n  })\n  .then(res => _checkResponse(res))\n}\n\nexport const authorization = (email, password) => {\n  return fetch(`${BASE_URL}/signin`, {\n    method: 'POST',\n    headers: {'Content-Type': 'application/json'},\n    body: JSON.stringify({ password, email })\n  })\n  .then(res => _checkResponse(res))\n}\n\nexport const tokenCheck = (token) => { \n  return fetch(`${BASE_URL}/users/me`, {\n    method: 'GET',\n    headers: {\"Content-Type\": \"application/json\",\n          \"Authorization\" : `Bearer ${token}`}\n  })\n  .then(res => _checkResponse(res))\n}","export default __webpack_public_path__ + \"static/media/done.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/fail.df8eddf6.svg\";","import Header from \"./Header\";\nimport Footer from \"./Footer\";\nimport Main from \"./Main\";\nimport AddPlacePopup from \"./AddPlacePopup\";\nimport Login from \"./Login\";\nimport Register from \"./Register\";\nimport ProtectedRoute from \"./ProtectedRoute\";\nimport InfoTooltip from \"./InfoTooltip\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport ImagePopup from \"./ImagePopup\";\n\nimport api from \"../utils/api\";\nimport CurrentUserContext from \"../contexts/CurrentUserContext\";\nimport EditProfilePopup from \"../components/EditProfilePopup\";\nimport EditAvatarPopup from \"../components/EditAvatarPopup\";\n\nimport * as auth from \"../utils/auth\";\nimport done from \"../images/done.svg\";\nimport fail from \"../images/fail.svg\";\n\nimport { Route, Switch, useHistory } from \"react-router-dom\";\nimport React, { useState, useEffect } from \"react\";\n\nfunction App() {\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false);\n  const [selectedCard, setSelectedCard] = useState({ isOpened: false });\n  const [isConfirmPopupOpen, setIsConfirmPopupOpen] = useState(false);\n  const [cards, setCards] = useState([]);\n  const [currentUser, setCurrentUser] = useState({});\n  const [userEmail, setUserEmail] = useState(\"\");\n  const [isInfoTooltipOpen, setInfoTooltipOpen] = useState({\n    opened: false,\n    success: false,\n  });\n  const [currentPath, setCurrentPath] = useState(\"/\");\n  const history = useHistory();\n\n  useEffect(() => {\n    if (loggedIn === true) {\n      api\n        .getUserInfo()\n        .then((data) => {\n          setCurrentUser(data);\n        })\n        .catch((e) => console.log(e));\n    }\n  }, [loggedIn]);\n\n  useEffect(() => {\n    if (loggedIn === true) {\n      api\n        .getInitialCards()\n        .then((data) => {\n          setCards(data);\n        })\n        .catch((err) => console.log(err));\n    }\n  }, [loggedIn]);\n\n  function handleCardLike(card) {\n    // Проверяем, есть ли уже лайк на этой карточке\n    const isLiked = card.likes.some((i) => i._id === currentUser._id);\n    // Отправляем запрос в Api и получаем обновлённые данные карточки\n    api\n      .changeLikeCardStatus(card._id, isLiked)\n      .then((newCard) => {\n        setCards((state) =>\n          state.map((c) => (c._id === card._id ? newCard : c))\n        );\n      })\n      .catch((err) => console.log(err));\n  }\n  // Удаление карточки\n  const handleCardDelete = (card) => {\n    api\n      .removeCard(card._id)\n      .then(() => {\n        setCards((state) => state.filter((c) => c._id !== card._id));\n      })\n      .catch((err) => console.log(err));\n  };\n  // Обработчик картинки\n  const handleCardClick = ({ link, name, isOpened }) => {\n    setSelectedCard({ link, name, isOpened: !isOpened });\n  };\n  // Обработчики попапов: open & close\n  const handleEditAvatarClick = () => {\n    setIsEditAvatarPopupOpen(!isEditAvatarPopupOpen);\n  };\n  const handleEditProfileClick = () => {\n    setIsEditProfilePopupOpen(!isEditProfilePopupOpen);\n  };\n  const handleAddPlaceClick = () => {\n    setIsAddPlacePopupOpen(!isAddPlacePopupOpen);\n  };\n  const handleConfirmPopupClick = () => {\n    setIsConfirmPopupOpen(!isConfirmPopupOpen);\n  };\n\n  const closeAllPopups = () => {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setSelectedCard({ isOpened: false });\n    setIsConfirmPopupOpen(false);\n    setInfoTooltipOpen({ opened: false, success: false });\n  };\n\n  // Обработчик информации о пользователе\n  const handleUpdateUser = (userData) => {\n    api\n      .patchProfileInfo(userData)\n      .then((data) => {\n        setCurrentUser(data);\n        closeAllPopups();\n      })\n      .catch((err) => console.log(err));\n  };\n\n  // Обновление аватара\n  const handleUpdateAvatar = (newAvatar) => {\n    api\n      .newAvatar(newAvatar)\n      .then((data) => {\n        setCurrentUser(data);\n        closeAllPopups();\n      })\n      .catch((err) => console.log(err));\n  };\n\n  // Добавление карточки\n  const handleAddPlace = (data) => {\n    api\n      .patchCard(data)\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n      })\n      .catch((err) => console.log(err));\n  };\n  const handlePathChange = (newPath) => {\n    setCurrentPath(newPath);\n  };\n\n  // Проверка токена\n  React.useEffect(() => {\n    auth\n      .tokenCheck(localStorage.getItem(\"token\"))\n      .then((result) => {\n        if (result) {\n          setUserEmail(result.data.email);\n          setLoggedIn(true);\n          history.push(\"/\");\n          setCurrentPath(\"/\");\n        } else {\n          throw new Error(\n            \"Ошибка текущего сеанса. Необходимо заново авторизироваться\"\n          );\n        }\n      })\n      .catch((err) => {\n        console.log(`Ошибка входа по токену ${err}`);\n        history.push(\"/sign-in\");\n      });\n  }, []);\n\n  // Обработчик завершения\n  const handleLogout = () => {\n    localStorage.removeItem(\"token\");\n    setUserEmail(\"\");\n    setLoggedIn(false);\n    history.push(\"/sign-in\");\n    setCurrentPath(\"/sign-in\");\n  };\n\n  // Обработчик регистрации\n  const handleSignupSubmit = (email, password) => {\n    auth\n      .register(email, password)\n      .then((result) => {\n        if (result) {\n          setUserEmail(result.data.email);\n          setInfoTooltipOpen({ opened: true, success: true });\n          setLoggedIn(true);\n          history.push(\"/sign-in\");\n          setCurrentPath(\"/sign-in\");\n        } else {\n          throw new Error(\"Не удалось пройти регистрацию\");\n        }\n      })\n      .catch((err) => {\n        console.log(`Ошибка регистрации: ${err}`);\n        setInfoTooltipOpen({ opened: true, success: false });\n      });\n  };\n\n  // Обработчик авторизации\n  const handleSigninSubmit = (email, password) => {\n    auth\n      .authorization(email, password)\n      .then((data) => {\n        if (data.token) {\n          localStorage.setItem(\"token\", data.token);\n          setUserEmail(email);\n          setLoggedIn(true);\n          history.push(\"/\");\n          setCurrentPath(\"/\");\n        } else {\n          throw new Error(\"Не удалось получить токен от сервера\");\n        }\n      })\n      .catch((err) => {\n        console.log(\n          alert(`Ошибка авторизации: ${err}. Проверьте корректность данных`)\n        );\n      });\n  };\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"body\">\n        <div className=\"page\">\n          <Header\n            userEmail={userEmail}\n            onLogout={handleLogout}\n            path={currentPath}\n          />\n\n          <Switch>\n            <Route path=\"/sign-in\">\n              <Login\n                onSignin={handleSigninSubmit}\n                onPathChange={handlePathChange}\n              />\n            </Route>\n            <Route path=\"/sign-up\">\n              <Register\n                onSignup={handleSignupSubmit}\n                onPathChange={handlePathChange}\n              />\n            </Route>\n            <ProtectedRoute\n              path=\"/\"\n              loggedIn={loggedIn}\n              component={Main}\n              onEditAvatar={handleEditAvatarClick}\n              onEditProfile={handleEditProfileClick}\n              onCardClick={handleCardClick}\n              onCardLike={handleCardLike}\n              cards={cards}\n              onConfirmPopup={handleConfirmPopupClick}\n              onCardDelete={handleCardDelete}\n              onAddPlace={handleAddPlaceClick}\n            />\n          </Switch>\n          <Footer />\n        </div>\n\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onUpdateUser={handleUpdateUser}\n        />\n        <AddPlacePopup\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onAddPlace={handleAddPlace}\n        ></AddPlacePopup>\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onUpdateAvatar={handleUpdateAvatar}\n        ></EditAvatarPopup>\n        <PopupWithForm\n          name=\"sure\"\n          title=\"Вы уверены?\"\n          isOpen={isConfirmPopupOpen}\n          container=\"popup__container popup__form\"\n          onClose={closeAllPopups}\n        ></PopupWithForm>\n\n        <ImagePopup onClose={closeAllPopups} card={selectedCard} />\n        <InfoTooltip\n          isOpen={isInfoTooltipOpen.opened}\n          onClose={closeAllPopups}\n          statusImage={isInfoTooltipOpen.success ? done : fail}\n          title={\n            isInfoTooltipOpen.success\n              ? \"Вы успешно зарегистрировались!\"\n              : \"Что-то пошло не так. Попробуйте ещё раз!\"\n          }\n        />\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\nimport {BrowserRouter} from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n    <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\nreportWebVitals();\n"],"sourceRoot":""}