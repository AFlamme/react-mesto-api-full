{"version":3,"sources":["contexts/CurrentUserContext.jsx","images/avatar.png","utils/api.js","utils/auth.js","components/Footer.jsx","images/logo.svg","components/Header.jsx","components/ImagePopup.jsx","components/Card.jsx","components/Main.jsx","hooks/useFormWithValidation.jsx","components/PopupWithForm.jsx","components/EditProfilePopup.jsx","components/EditAvatarPopup.jsx","components/AddPlacePopup.jsx","components/AcceptDeleteCardPopup.jsx","components/Loader.jsx","components/Login.jsx","components/Register.jsx","components/InfoTooltip.jsx","components/ProtectedRoute.jsx","components/App.jsx","reportWebVitals.js","index.js"],"names":["currentUserContext","React","createContext","onError","res","ok","json","Promise","reject","status","api","baseUrl","headers","this","_url","_headers","jwt","localStorage","getItem","fetch","method","_getHeaders","then","all","getUserInfo","getInitialCards","info","body","JSON","stringify","name","about","data","link","input","avatar","_id","BASE_URL","Footer","className","Date","getFullYear","Header","email","onSignOut","useState","isClicked","setIsClicked","isMobile","useMediaQuery","query","useEffect","to","src","logo","alt","path","exact","onClick","ImagePopup","card","onClose","isOpen","useEscapePress","id","e","stopPropagation","type","Card","onCardDelete","onCardClick","onCardLike","currentUser","useContext","isOwn","owner","isLiked","likes","some","i","cardLikeButtonClassName","length","Main","cards","onEditAvatar","onEditProfile","onAddPlace","aria-label","style","backgroundImage","map","useFormWithValidation","values","setValues","errors","setErrors","isValid","setIsValid","resetForm","useCallback","newValues","newErrors","newIsValid","handleChange","target","value","validationMessage","closest","checkValidity","PopupWithForm","title","children","onSubmit","submitText","isDisabled","noValidate","disabled","EditProfilePopup","onUpdateUser","preventDefault","placeholder","minLength","maxLength","required","onChange","EditAvatarPopup","onUpdateAvatar","AddPlacePopup","AcceptDeleteCardPopup","isAccept","Loader","Login","onLogin","password","Register","handleRegister","InfoTooltip","successful","ProtectedRoute","Component","component","props","loggedIn","App","history","useHistory","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","selectedCard","setSelectedCard","isImagePopupOpen","setIsImagePopupOpen","isDeletePopupOpen","setIsDeletePopupOpen","cardDelete","setCardDelete","setCurrentUser","setCards","isLoader","setIsLoader","isInfoTooltipShow","setIsInfoTooltipShow","setLoggedIn","setEmail","callback","dependency","onEscClose","key","document","addEventListener","removeEventListener","closeAllPopups","handleInfoTooltip","auth","push","catch","err","console","log","renderUserAndCards","dataUserInfo","dataCards","finally","Provider","removeItem","deleteLike","newCard","state","c","setLike","token","setItem","setUserInfo","newInfo","addCard","setUserAvatar","deleteCard","filter","item","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.306b9e0f.chunk.js","sourcesContent":["import React from 'react';\n\nexport const currentUserContext = React.createContext();\n","export default __webpack_public_path__ + \"static/media/avatar.50cc18be.png\";","const onError = res => {\n  if (res.ok) {\n    return res.json();\n  }\n\n  return Promise.reject(`Ошибка: ${res.status}`);\n};\n\nclass Api {\n  constructor({baseUrl, headers}) {\n    this._url = baseUrl;\n    this._headers = headers;\n  }\n\n  _getHeaders() {\n    const jwt = localStorage.getItem('jwt');\n    return {\n      'Authorization': `Bearer ${jwt}`,\n      ...this._headers,\n    };\n  }\n\n  // Получение карточек с сервера\n  getInitialCards() {\n    return fetch(`${this._url}/cards`, {\n      method: 'GET',\n      headers: this._getHeaders()\n    })\n      .then(onError);\n  }\n\n  // Получение данных о пользователе с сервера\n  getUserInfo() {\n    return fetch(`${this._url}/users/me`, {\n      method: 'GET',\n      headers: this._getHeaders()\n    })\n      .then(onError);\n  }\n\n  // Возврат массива промисов\n  renderUserAndCards() {\n    return Promise.all([this.getUserInfo(), this.getInitialCards()])\n  }\n\n  // Запись данных пользователя на сервер\n  setUserInfo(info) {\n    return fetch(`${this._url}/users/me`, {\n      method: 'PATCH',\n      headers: this._getHeaders(),\n      body: JSON.stringify({\n        name: info.name,\n        about: info.about\n      })\n    })\n    .then(onError)\n  }\n\n  // Добавление карточки на сервер\n  addCard(data) {\n    return fetch(`${this._url}/cards`, {\n      method: 'POST',\n      headers: this._getHeaders(),\n      body: JSON.stringify({\n        name: data.name,\n        link: data.link\n      })\n    })\n      .then(onError);\n  }\n\n  // Запись аватарка на сервер\n  setUserAvatar(input) {\n    return fetch(`${this._url}/users/me/avatar`, {\n      method: 'PATCH',\n      headers: this._getHeaders(),\n      body: JSON.stringify({\n        avatar: input.avatar\n      })\n    })\n    .then(onError)\n  }\n\n  // Отправление лайка на сервер\n  setLike(data) {\n    return fetch(`${this._url}/cards/${data._id}/likes`, {\n      method: 'PUT',\n      headers: this._getHeaders()\n    })\n      .then(onError);\n  }\n\n  // Убираем лайк с сервера\n  deleteLike(data) {\n    return fetch(`${this._url}/cards/${data._id}/likes`, {\n      method: 'DELETE',\n      headers: this._getHeaders()\n    })\n      .then(onError);\n  }\n\n  // Удаление карточки\n  deleteCard(data) {\n    return fetch(`${this._url}/cards/${data._id}`, {\n      method: 'DELETE',\n      headers: this._getHeaders()\n    })\n      .then(onError);\n  }\n}\n\nconst api = new Api({\n  baseUrl: 'https://api.domainname.aflamme.nomorepartiesxyz.ru',\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\nexport default api;\n","const BASE_URL = \"https://api.domainname.aflamme.nomorepartiesxyz.ru\";\n\nconst onError = res => {\n  if (res.ok) {\n    return res.json();\n  }\n\n  return Promise.reject(`Ошибка: ${res.status}`);\n};\n\nexport const register = (email, password) => {\n  return fetch(`${BASE_URL}/signup`, {\n    method: 'POST',\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ password, email })\n  })\n  .then(onError)\n};\n\nexport const login = (email, password) => {\n  return fetch(`${BASE_URL}/signin`, {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify({ password, email })\n  })\n  .then(onError)\n};\n\nexport const checkToken = jwt => {\n  return fetch(`${BASE_URL}/users/me`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n      \"Authorization\" : `Bearer ${jwt}`\n    }\n  })\n  .then(onError)\n};\n","export default function Footer() {\n  return (\n    <footer className=\"footer page__footer\">\n      <p className=\"footer__copyright\">&copy; {new Date().getFullYear()} Mesto Russia</p>\n    </footer>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/logo.03b78ada.svg\";","import logo from '../images/logo.svg';\nimport { Link, Switch, Route } from 'react-router-dom';\nimport { useState, useEffect } from 'react';\nimport { useMediaQuery } from 'react-responsive';\n\nexport default function Header({ email, onSignOut }) {\n  const [isClicked, setIsClicked] = useState(false);\n\n  function handleClickBurger() {\n    setIsClicked(!isClicked);\n  }\n  // Без контроля ширины окна просмотра,\n  // если в мобильной версии закрыть бургер-меню и развернуть большой экран,\n  // то поле email-а и кнопка имеют 'display: none'\n  const isMobile = useMediaQuery({ query: `(max-width: 500px)` });\n\n  useEffect(() => {\n    if (isMobile) {\n      setIsClicked(true);\n    } else {\n      setIsClicked(false);\n    }\n  }, [isMobile]);\n\n  return(\n    <header className=\"header page__header\">\n      <Link to=\"/\" className=\"header__logo-link\">\n        <img src={logo} alt=\"логотип\" className=\"header__logo\" />\n      </Link>\n      <Switch>\n        <Route path=\"/signin\">\n          <Link className=\"header__link\" to=\"/signup\">Регистрация</Link>\n        </Route>\n        <Route path=\"/signup\">\n          <Link className=\"header__link\" to=\"/signin\">Войти</Link>\n        </Route>\n        <Route exact path=\"/\">\n          {!isClicked && (\n            <div className=\"header__info\">\n              <p className=\"header__email\">{email}</p>\n              <button className=\"header__button\" onClick={onSignOut}>Выйти</button>\n            </div>\n          )}\n          <button className={isClicked ? \"header__burger-button\" : \"header__burger-close\"} onClick={handleClickBurger}></button>\n        </Route>\n      </Switch>\n    </header>\n  );\n}\n","export default function ImagePopup({ card, onClose, isOpen, useEscapePress }) {\n  function handleClickOverlay(e) {\n    e.stopPropagation();\n  }\n\n  useEscapePress(onClose, isOpen);\n\n  return(\n    <div id=\"popup-picture\" className={`popup popup_opasity-high ${isOpen && 'popup_opened'}`} onClick={onClose}>\n      <figure className=\"popup__picture-container\" onClick={handleClickOverlay}>\n        <img className=\"popup__photo\" alt={`Карточка \"${card.name}\"`} src={card.link}/>\n        <button type=\"button\" className=\"popup__close-button popup__close-button_general\" onClick={onClose}></button>\n        <figcaption className=\"popup__photo-name\">{card.name}</figcaption>\n      </figure>\n    </div>\n  )\n}\n","import { useContext } from 'react';\nimport { currentUserContext } from '../contexts/CurrentUserContext.jsx';\n\nexport default function Card({ card, onCardDelete, onCardClick, onCardLike }) {\n  const currentUser = useContext(currentUserContext);\n  // Определяем, являемся ли мы владельцем текущей карточки\n  const isOwn = card.owner === currentUser._id;\n  // Определяем, есть ли у карточки лайк, поставленный текущим пользователем\n  const isLiked = card.likes.some(i => i === currentUser._id);\n  // Создаём переменную, которую после зададим в 'className' для кнопки лайка\n  const cardLikeButtonClassName = `element__like-button ${isLiked && 'element__like-button_active'}`;\n\n  function handleClick() {\n    onCardClick(card);\n  }\n\n  function handleLikeClick() {\n    onCardLike(card)\n  }\n\n  function handleDeleteCard () {\n    onCardDelete(card)\n  }\n\n  return(\n    <li className=\"element\">\n      {isOwn && (<button type=\"button\" className='element__delete-button' onClick={handleDeleteCard}></button>)}\n      <img src={card.link} alt={`карточка \"${card.name}\"`} className=\"element__photo\" onClick={handleClick} />\n      <div className=\"element__container\">\n        <h2 className=\"element__title\">{card.name}</h2>\n        <div className=\"element__like-container\">\n          <button type=\"button\" className={cardLikeButtonClassName} onClick={handleLikeClick}></button>\n          <span className=\"element__like-counter\">{card.likes.length}</span>\n        </div>\n      </div>\n    </li>\n  );\n}\n","import { useContext } from 'react';\nimport Card from './Card.jsx';\nimport { currentUserContext } from '../contexts/CurrentUserContext.jsx';\n\nexport default function Main({ cards, onEditAvatar, onEditProfile, onAddPlace, onCardClick, onCardDelete, onCardLike }) {\n  const currentUser = useContext(currentUserContext);\n\n  return (\n    <main className=\"main page__main\">\n      <section aria-label=\"Блок с профилем пользователя\" className=\"profile main__profile\" >\n        <div className=\"profile__avatar\" style={{ backgroundImage: `url(${currentUser.avatar})` }}  onClick={onEditAvatar}></div>\n        <div className=\"profile__info\">\n          <h1 className=\"profile__name\">{currentUser.name}</h1>\n          <p className=\"profile__job\">{currentUser.about}</p>\n          <button id=\"profile__edit-button\" type=\"button\" className=\"profile__edit-button\" onClick={onEditProfile}></button>\n        </div>\n        <button id=\"profile__add-button\" type=\"button\" className=\"profile__add-button\" onClick={onAddPlace}></button>\n      </section>\n      <section aria-label=\"Блок с фото-карточками\" className=\"elements\">\n        <ul className=\"elements__list\">\n          {cards.map(card => {\n            return(\n              <Card key={card._id} card={card} onCardClick={onCardClick} onCardDelete={onCardDelete} onCardLike={onCardLike}/>\n            );\n          })}\n        </ul>\n      </section>\n    </main>\n  );\n}\n","import { useState, useCallback } from 'react';\n\nexport default function useFormWithValidation() {\n  const [values, setValues] = useState({});\n  const [errors, setErrors] = useState({});\n  const [isValid, setIsValid] = useState(false);\n\n  const handleChange = (e) => {\n    const input = e.target;\n    const { value, name } = input;\n    setValues({ ...values, [name]: value }); // Универсальный обработчик полей\n    setErrors({ ...errors, [name]: input.validationMessage }); // Универсальный обработчик ошибок\n    setIsValid(input.closest('form').checkValidity()); // Проверка валидности\n  };\n\n  const resetForm = useCallback(\n    (newValues = {}, newErrors = {}, newIsValid = false) => { // Сброс формы, полей и ошибок\n      setValues(newValues);\n      setErrors(newErrors);\n      setIsValid(newIsValid);\n    },\n    [setValues, setErrors, setIsValid]\n  );\n\n  return { values, handleChange, resetForm, errors, isValid };\n}\n","export default function PopupWithForm({ name, title, isOpen, onClose, children, onSubmit, useEscapePress, submitText=\"Сохранить\", isDisabled = false }) {\n  function handleClickOverlay(e) {\n    e.stopPropagation();\n  }\n  useEscapePress(onClose, isOpen);\n\n  return(\n    <div id={`popup-${name}`} className={`popup ${isOpen && \"popup_opened\"}`} onClick={onClose}>\n      <div className=\"popup__container\" onClick={handleClickOverlay}>\n        <h2 className=\"popup__title\">{title}</h2>\n        <form id={`popup-${name}__form`} name={`${name}-popup`} className=\"popup__form\" noValidate onSubmit={onSubmit}>\n          {children}\n          <button\n            id={`popup-${name}__save-button`}\n            type=\"submit\"\n            className={`popup__save-button ${isDisabled && 'popup__save-button_disabled'}`}\n            disabled={isDisabled}\n          >\n            {submitText}\n          </button>\n          <button\n            type=\"button\"\n            className=\"popup__close-button popup__close-button_general\"\n            onClick={onClose}\n          ></button>\n        </form>\n      </div>\n    </div>\n  );\n}\n","import { useContext, useEffect } from 'react';\nimport { currentUserContext } from '../contexts/CurrentUserContext.jsx';\nimport useFormWithValidation from '../hooks/useFormWithValidation.jsx';\nimport PopupWithForm from './PopupWithForm.jsx';\n\nexport default function EditProfilePopup({ isOpen, onClose, onUpdateUser, useEscapePress }) {\n  const currentUser = useContext(currentUserContext);\n  const {values, handleChange, resetForm, errors, isValid} = useFormWithValidation();  // Универсальный обработчик полей\n\n  // После загрузки текущего пользователя из API\n  // его данные будут использованы в управляемых компонентах.\n  useEffect(() => {\n    if (currentUser) {\n      resetForm(currentUser, {}, true);\n    }\n  }, [isOpen, currentUser, resetForm]);\n\n  // Передаём значения управляемых компонентов во внешний обработчик\n  function handleSubmit(e) {\n    e.preventDefault();\n    onUpdateUser(values);\n  }\n\n  return (\n    <PopupWithForm\n      name=\"edit\"\n      title=\"Редактировать профиль\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleSubmit}\n      useEscapePress={useEscapePress}\n      isDisabled={!isValid}\n    >\n      <fieldset className=\"popup__info\">\n        <label className=\"popup__label\">\n          <input\n            type=\"text\"\n            placeholder=\"Имя\"\n            name=\"name\"\n            value={values.name || ''}\n            id=\"name\" minLength=\"2\"\n            maxLength=\"40\"\n            required\n            className=\"popup__input\"\n            onChange={handleChange}\n          />\n          <span className=\"popup__error\" id=\"name-error\">\n            {errors.name || \"\"}\n          </span>\n        </label>\n        <label className=\"popup__label\">\n          <input\n            type=\"text\"\n            placeholder=\"О себе\"\n            name=\"about\"\n            value={values.about || ''}\n            id=\"about\"\n            minLength=\"2\"\n            maxLength=\"200\"\n            required className=\"popup__input\"\n            onChange={handleChange}\n          />\n          <span className=\"popup__error\" id=\"about-error\">\n            {errors.about || ''}\n          </span>\n        </label>\n      </fieldset>\n    </PopupWithForm>\n  )\n}\n","import { useEffect } from 'react';\nimport PopupWithForm from './PopupWithForm.jsx';\nimport useFormWithValidation from '../hooks/useFormWithValidation.jsx';\n\nexport default function EditAvatarPopup({ isOpen, onClose, onUpdateAvatar, useEscapePress }) {\n  const {values, handleChange, resetForm, errors, isValid} = useFormWithValidation();\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onUpdateAvatar(values);\n  }\n\n  // Очищаем поле\n  useEffect(() => {\n    resetForm();\n  }, [isOpen, resetForm]);\n\n  return(\n    <PopupWithForm\n      name=\"avatar\"\n      title=\"Обновить аватар\"\n      isOpen={isOpen}\n      onClose={onClose}\n      useEscapePress={useEscapePress}\n      onSubmit={handleSubmit}\n      isDisabled={!isValid}\n    >\n      <fieldset className=\"popup__info\">\n        <label className=\"popup__label\">\n          <input\n            type=\"url\"\n            placeholder=\"Ссылка на изображение\"\n            name=\"avatar\"\n            id=\"avatar__link\"\n            className=\"popup__input\"\n            value={values.avatar || ''}\n            onChange={handleChange}\n            required\n          />\n          <span className=\"popup__error\" id=\"avatar__link-error\">\n            {errors.avatar || ''}\n          </span>\n        </label>\n      </fieldset>\n    </PopupWithForm>\n  )\n}\n","import { useEffect } from 'react';\nimport PopupWithForm from './PopupWithForm.jsx';\nimport useFormWithValidation from '../hooks/useFormWithValidation.jsx';\n\nexport default function AddPlacePopup({ isOpen, onClose, onAddPlace, useEscapePress}) {\n  const {values, handleChange, resetForm, errors, isValid} = useFormWithValidation();\n\n  function handleAddPlaceSubmit(e) {\n    e.preventDefault();\n    onAddPlace(values);\n  }\n\n  useEffect(() => {\n    resetForm();\n  }, [isOpen, resetForm])\n\n  return(\n    <PopupWithForm\n      name=\"create-card\"\n      title=\"Новое место\"\n      submitText=\"Создать\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleAddPlaceSubmit}\n      useEscapePress={useEscapePress}\n      isDisabled={!isValid}\n    >\n      <fieldset className=\"popup__info\">\n        <label className=\"popup__label\">\n          <input\n            type=\"text\"\n            placeholder=\"Название места\"\n            name=\"name\"\n            value={values.name || ''}\n            onChange={handleChange}\n            id=\"create-card__title\"\n            minLength=\"2\"\n            maxLength=\"30\"\n            required\n            className=\"popup__input\"\n          />\n          <span className=\"popup__error\" id=\"create-card__title-error\">\n            {errors.name || ''}\n          </span>\n        </label>\n        <label className=\"popup__label\">\n          <input\n            type=\"url\"\n            placeholder=\"URL-cсылка на картинку\"\n            name=\"link\"\n            value={values.link || ''}\n            onChange={handleChange}\n            id=\"create-card__link\"\n            required\n            className=\"popup__input\"\n          />\n          <span className=\"popup__error\" id=\"create-card__link-error\">\n            {errors.link || ''}\n          </span>\n        </label>\n      </fieldset>\n    </PopupWithForm>\n  )\n}\n\n\n","import PopupWithForm from './PopupWithForm.jsx';\n\nexport default function AcceptDeleteCardPopup({ isOpen, onClose, isAccept, useEscapePress }) {\n  function handleDeleteCard (e) {\n    e.preventDefault();\n    isAccept()\n  }\n\n  return(\n    <PopupWithForm\n      name=\"delete-card\"\n      title=\"Вы уверены?\"\n      submitText=\"Да\"\n      isOpen={isOpen}\n      onClose={onClose}\n      onSubmit={handleDeleteCard}\n      useEscapePress={useEscapePress}\n    />\n  )\n}\n","function Loader({ isOpen }) {\n\n  return (\n    <div className={`popup popup_loader ${isOpen && 'popup_opened'}`}>\n      <div className='popup__loader'><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>\n    </div>\n  );\n\n}\n\nexport default Loader;\n","import { useEffect } from 'react';\nimport useFormWithValidation from '../hooks/useFormWithValidation.jsx';\n\nexport default function Login({ onLogin }) {\n  const {values, handleChange, resetForm, errors, isValid} = useFormWithValidation();\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onLogin(values);\n  }\n\n  useEffect(() => {\n    resetForm();\n  }, [resetForm]);\n\n  return (\n    <div className=\"register page__register\">\n      <h2 className=\"register__title\">Вход</h2>\n      <form name=\"form_register\" className=\"register__form\" noValidate onSubmit={handleSubmit}>\n        <fieldset className=\"register__fieldset\">\n          <label className=\"register__label\">\n            <input\n              className=\"register__input\"\n              type=\"email\"\n              placeholder=\"Email\"\n              name=\"email\"\n              minLength=\"2\"\n              maxLength=\"40\"\n              value={values.email || ''}\n              onChange={handleChange}\n              required\n            />\n            <span className=\"register__error\" id=\"email-error\">\n              {errors.email || ''}\n            </span>\n          </label>\n          <label className=\"register__label\">\n            <input\n              className=\"register__input\"\n              type=\"password\"\n              placeholder=\"Пароль\"\n              name=\"password\"\n              minLength=\"2\"\n              maxLength=\"40\"\n              value={values.password || ''}\n              onChange={handleChange}\n              required\n            />\n            <span className=\"register__error\" id=\"password-error\">\n              {errors.password || ''}\n            </span>\n          </label>\n        </fieldset>\n        <button\n          type=\"submit\"\n          className={`register__button ${!isValid && 'register__button_disabled'}`}\n          disabled={!isValid}\n        >\n          Войти\n        </button>\n      </form>\n    </div>\n  )\n}\n","import { useEffect} from 'react';\nimport { Link } from 'react-router-dom';\nimport useFormWithValidation from '../hooks/useFormWithValidation.jsx';\n\nexport default function Register({handleRegister}) {\n  const {values, handleChange, resetForm, errors, isValid} = useFormWithValidation();\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    handleRegister(values);\n  }\n\n  useEffect(() => {\n    resetForm();\n  }, [resetForm])\n\n  return (\n    <div className=\"register page__register\">\n      <h2 className=\"register__title\">Регистрация</h2>\n      <form name=\"form_register\" className=\"register__form\" noValidate onSubmit={handleSubmit}>\n        <fieldset className=\"register__fieldset\">\n          <label className=\"register__label\">\n            <input\n              className=\"register__input\"\n              type=\"email\"\n              placeholder=\"Email\"\n              name=\"email\"\n              minLength=\"2\"\n              maxLength=\"40\"\n              value={values.email || ''}\n              onChange={handleChange}\n              required\n            />\n            <span className=\"register__error\" id=\"email-error\">\n              {errors.email || ''}\n            </span>\n          </label>\n          <label className=\"register__label\">\n            <input\n              className=\"register__input\"\n              type=\"password\"\n              placeholder=\"Пароль\"\n              name=\"password\"\n              minLength=\"2\"\n              maxLength=\"40\"\n              value={values.password || ''}\n              onChange={handleChange}\n              required\n            />\n            <span className=\"register__error\" id=\"password-error\">\n              {errors.password || ''}\n            </span>\n          </label>\n        </fieldset>\n        <button\n          type=\"submit\"\n          className={`register__button ${!isValid && 'register__button_disabled'}`}\n          disabled={!isValid}\n        >\n          Зарегистрироваться\n        </button>\n      </form>\n      <Link to=\"/signin\" className=\"register__link\">Уже зарегистрированы? Войти</Link>\n    </div>\n  )\n}\n","export default function InfoTooltip({ onClose, status: { isOpen, successful }, useEscapePress}) {\n  function handleClickOverlay(e) {\n    e.stopPropagation();\n  }\n\n  useEscapePress(onClose, isOpen);\n\n  return(\n    <div id=\"popup-info-tooltip\" className={`popup ${isOpen && 'popup_opened'}`} onClick={onClose}>\n      <div className=\"popup__container\" onClick={handleClickOverlay}>\n        <div className={`popup__status ${successful ? 'popup__status_success' : 'popup__status_fail'}`}></div>\n        <h2 className=\"popup__title popup__title_center\">{successful ? 'Вы успешно зарегистрировались!' : 'Что-то пошло не так! Попробуйте еще раз.'}</h2>\n        <button type=\"button\" className=\"popup__close-button popup__close-button_general\" onClick={onClose}></button>\n      </div>\n    </div>\n  );\n}\n","import { Route, Redirect } from \"react-router-dom\";\n\nconst ProtectedRoute = ({component: Component, ...props}) => {\n  return (\n    <Route>\n      {\n        () => props.loggedIn === true ? <Component {...props} /> : <Redirect to=\"/signin\" />\n      }\n    </Route>\n  )\n}\n\nexport default ProtectedRoute;\n","import { useState, useEffect } from 'react';\nimport { Route, Switch, useHistory } from 'react-router-dom';\nimport { currentUserContext } from '../contexts/CurrentUserContext.jsx';\nimport avatar from '../images/avatar.png';\nimport api from '../utils/api.js';\nimport * as auth from '../utils/auth.js';\nimport Footer from './Footer.jsx';\nimport Header from './Header.jsx';\nimport ImagePopup from './ImagePopup.jsx';\nimport Main from './Main.jsx';\nimport EditProfilePopup from './EditProfilePopup.jsx'\nimport EditAvatarPopup from './EditAvatarPopup.jsx';\nimport AddPlacePopup from './AddPlacePopup.jsx';\nimport AcceptDeleteCardPopup from './AcceptDeleteCardPopup.jsx';\nimport Loader from './Loader.jsx';\nimport Login from './Login.jsx';\nimport Register from './Register.jsx';\nimport InfoTooltip from './InfoTooltip.jsx';\nimport ProtectedRoute from './ProtectedRoute.jsx';\n\nfunction App() {\n  const history = useHistory();\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = useState(false); // Открытие попапа редактирования профиля\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = useState(false); // Открытие попапа добавления карточек\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = useState(false); // Открытие попапа смены аватара\n  const [selectedCard, setSelectedCard] = useState({}); // Данные карточки на полный экран\n  const [isImagePopupOpen, setIsImagePopupOpen] = useState(false); // Открытие попап карточки на весь экран\n  const [isDeletePopupOpen, setIsDeletePopupOpen] = useState(false); // Открытие попапа удаления карточки\n  const [cardDelete, setCardDelete] = useState({}); // Данные для удалённой карточки\n  const [currentUser, setCurrentUser] = useState({ name: 'Имя пользователя', about: 'О пользователе', avatar: avatar}); // Данные пользователя\n  const [cards, setCards] = useState([]); // Карточки\n  const [isLoader, setIsLoader] = useState(false); // Лоадер\n  const [isInfoTooltipShow, setIsInfoTooltipShow] = useState({ isOpen: false, successful: false }); // успех/неудача\n\n  // Вход\n  const [loggedIn, setLoggedIn] =  useState(false);\n  const [email, setEmail] = useState('');\n\n  // Проверка токена и авторизация пользователя\n  useEffect(() => {\n    const jwt = localStorage.getItem('jwt');\n    if (jwt) {\n      auth.checkToken(jwt)\n      .then(data => {\n        if (data) {\n          setEmail(data.email);\n          setLoggedIn(true);\n          history.push('/');\n        }\n      })\n      .catch(err => console.log(err))\n    }\n  }, [history])\n\n  // При входе (залогиниться) получаем карточки и информацию о пользователе\n  useEffect(() => {\n    if (loggedIn) {\n      setIsLoader(true);\n      api.renderUserAndCards()\n        .then(([dataUserInfo, dataCards]) => {\n          setCurrentUser(dataUserInfo);\n          setCards(dataCards);\n        })\n        .catch((err) => console.log(err))\n        .finally(() => setIsLoader(false))\n    }\n  }, [loggedIn])\n\n  function useEscapePress(callback, dependency) {\n    useEffect(() => {\n      if (dependency) {\n        const onEscClose = e => {\n          if (e.key === 'Escape') {\n            callback()\n          }\n        }\n        document.addEventListener('keyup', onEscClose);\n        return () => {\n          document.removeEventListener('keyup', onEscClose)\n        };\n      }\n    }, [callback, dependency])\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsImagePopupOpen(false);\n    setIsDeletePopupOpen(false);\n    setIsInfoTooltipShow({ isOpen: false, successful: false })\n  }\n\n  // Открытие картинки на полный экран\n  function handleCardClick(data) {\n    setIsImagePopupOpen(true);\n    setSelectedCard(data)\n  }\n\n  // Функция-слушатель на клик по корзинке, чтобы открыть попап\n  function handleDeleteCardClick(data) {\n    setCardDelete(data)\n    setIsDeletePopupOpen(true);\n  }\n\n  // Функция управляет удалением карточки\n  function handleDeleteCard() {\n    setIsLoader(true);\n    api.deleteCard(cardDelete)\n      .then(() => {\n        setCards(state => state.filter(item => item._id !== cardDelete._id))\n      })\n      .then(() => closeAllPopups())\n      .catch(err => console.log(err))\n      .finally(() => setIsLoader(false))\n  }\n\n  // Функция по постановке и снятию лайка\n  function handleCardLike(card) {\n    // Снова проверяем, есть ли уже лайк на этой карточке\n    const isLiked = card.likes.some(i => i === currentUser._id);\n\n    if (!isLiked) {\n      api.setLike(card)\n        .then(newCard => {\n          setCards(state => state.map(c => c._id === card._id ? newCard : c))\n        })\n        .catch(err => console.log(err))\n      } else {\n        api.deleteLike(card)\n        .then(newCard => {\n          setCards(state => state.map(c => c._id === card._id ? newCard : c))\n        })\n        .catch(err => console.log(err))\n      }\n  }\n\n  // Отправка данных пользователя на сервер\n  function handleUpdateUser(info) {\n    setIsLoader(true);\n    api.setUserInfo(info)\n      .then(newInfo => { setCurrentUser(newInfo) })\n      .then(() => { closeAllPopups() })\n      .catch(err => console.log(err))\n      .finally(() => setIsLoader(false))\n  }\n\n  // Отправка аватара пользователя на сервер\n  function handleUpdateAvatar(input) {\n    setIsLoader(true);\n      api.setUserAvatar(input)\n      .then(newInfo => { setCurrentUser(newInfo) })\n      .then(() => { closeAllPopups() })\n      .catch(err => console.log(err))\n      .finally(() => setIsLoader(false))\n  }\n\n  // Отправка новой карточки и обновление\n  function handleAddPlace(data) {\n    setIsLoader(true);\n    api.addCard(data)\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n      })\n      .catch(err => console.log(err))\n      .finally(() => setIsLoader(false))\n  }\n\n  function handleInfoTooltip(res) {\n    setIsInfoTooltipShow({ isOpen: true, successful: res })\n  }\n\n  // Регистрация пользователя\n  function handleRegister({ email, password }) {\n    setIsLoader(true);\n    auth.register(email, password)\n      .then(data => {\n        if (data) {\n          handleInfoTooltip(true);\n          history.push('/signin');\n        }\n      })\n      .catch(err => {\n        handleInfoTooltip(false);\n        console.log(err);\n      })\n      .finally(() => setIsLoader(false))\n  }\n\n  // Вход\n  function handleLogin({ email, password }) {\n    setIsLoader(true);\n    auth.login(email, password)\n      .then(jwt => {\n        if (jwt.token) {\n          setEmail(email);\n          setLoggedIn(true);\n          localStorage.setItem('jwt', jwt.token);\n          history.push('/');\n        }\n      })\n      .catch(err => {\n        handleInfoTooltip(false);\n        console.log(err);\n      })\n      .finally(() => setIsLoader(false))\n  }\n\n  // Выход\n  const handleSignOut = () => {\n    localStorage.removeItem('jwt');\n    setEmail('');\n    setLoggedIn(false);\n    history.push('/signin');\n  }\n\n  return (\n    <div className=\"page\">\n      <currentUserContext.Provider value={currentUser}>\n        <Header\n          email={email}\n          onSignOut={handleSignOut} />\n        <Switch>\n          <ProtectedRoute exact path=\"/\"\n            component={Main}\n            loggedIn={loggedIn}\n            cards={cards}\n            onEditProfile={handleEditProfileClick}\n            onAddPlace={handleAddPlaceClick}\n            onEditAvatar={handleEditAvatarClick}\n            onCardClick={handleCardClick}\n            onCardDelete={handleDeleteCardClick}\n            onCardLike={handleCardLike} />\n          <Route path=\"/signin\">\n            <Login onLogin={handleLogin} />\n          </Route>\n          <Route path=\"/signup\">\n            <Register handleRegister={handleRegister} />\n          </Route>\n        </Switch>\n        <Footer />\n        <Loader\n          isOpen={isLoader} />\n        <InfoTooltip\n          onClose={closeAllPopups}\n          status={isInfoTooltipShow}\n          useEscapePress={useEscapePress} />\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onUpdateUser={handleUpdateUser}\n          useEscapePress={useEscapePress}/>\n        <AddPlacePopup\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onAddPlace={handleAddPlace}\n          useEscapePress={useEscapePress} />\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onUpdateAvatar={handleUpdateAvatar}\n          useEscapePress={useEscapePress} />\n        <AcceptDeleteCardPopup\n          isOpen={isDeletePopupOpen}\n          onClose={closeAllPopups}\n          isAccept={handleDeleteCard}\n          useEscapePress={useEscapePress} />\n        <ImagePopup\n          card={selectedCard}\n          isOpen={isImagePopupOpen}\n          onClose={closeAllPopups}\n          useEscapePress={useEscapePress} />\n      </currentUserContext.Provider>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App.jsx';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\nreportWebVitals();\n"],"sourceRoot":""}